# Сравнение JavaScript библиотек для парсинга S-выражений

## 1. s-expression (базовая)
- **Размер**: 14.1 kB
- **Зависимости**: 0
- **Последнее обновление**: 4 года назад
- **GitHub**: https://github.com/fwg/s-expression
- **Особенности**:
  - Простой API
  - Поддержка quote, quasiquote, unquote
  - Строки в кавычках парсятся в String объекты
  - Минималистичная реализация

```javascript
var parse = require('s-expression');
parse('(a b "c")'); // ['a', 'b', [String: 'c']]
parse("'(a `(b ,c))"); // ['quote', ['a', ['quasiquote', ['b', ['unquote', 'c']]]]]
```

## 2. sexpr-plus (расширенная)
- **GitHub**: https://github.com/anko/sexpr-plus
- **Зависимости**: 0
- **Особенности**:
  - Поддержка комментариев (от ; до конца строки)
  - Информация о позиции каждого узла в исходном тексте
  - Возвращает AST с типизированными узлами
  - Создана для eslisp

```javascript
// Возвращает объекты вида:
// { type: "list", content: [...], location: {...} }
// { type: "atom", content: "atomName", location: {...} }
// { type: "string", content: "text", location: {...} }
```

## 3. s-expression.js (полнофункциональная)
- **npm**: s-expression.js
- **Размер**: малый, 0 зависимостей
- **Последнее обновление**: 3 месяца назад (активно поддерживается!)
- **GitHub**: https://github.com/NLKNguyen/S-Expression.JS/
- **Особенности**:
  - Парсер, сериализатор, интерпретатор
  - AST в формате JSON
  - Поддержка boolean, number, null, string
  - Утилиты для обхода дерева
  - Работает в браузере и Node.js

## Рекомендация для проекта

Для системы квестов я рекомендую использовать **s-expression.js** по следующим причинам:

1. **Активная поддержка** - обновлялась 3 месяца назад
2. **Полный функционал** - включает не только парсер, но и сериализатор
3. **JSON-совместимый AST** - легко интегрируется с JavaScript
4. **Нулевые зависимости** - не раздувает проект
5. **Утилиты для работы с деревом** - полезно для обработки квестов

## Альтернативный выбор

Если нужна максимальная простота и информация о позиции в исходном тексте (для отладки), то **sexpr-plus** будет хорошим выбором благодаря location свойству в каждом узле.